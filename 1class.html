<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spanish Practice for Fatma</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .feedback {
            transition: all 0.3s ease-in-out;
        }
    </style>
</head>

<body class="bg-sky-100 text-gray-800 flex items-center justify-center min-h-screen p-4">

    <main class="bg-white w-full max-w-4xl mx-auto p-6 sm:p-8 rounded-2xl shadow-2xl">
        <header class="text-center mb-8">
            <h1 class="text-4xl sm:text-5xl font-bold text-sky-700">Let's Practice Spanish!</h1>
            <p class="text-lg text-gray-600 mt-2">Interactive games to learn basic phrases.</p>
        </header>

        <!-- Pestañas de Navegación -->
        <div class="mb-8 border-b border-gray-200">
            <nav class="flex flex-wrap -mb-px" id="tabs">
                <button onclick="changeTab(0)"
                    class="tab-btn text-lg font-semibold p-4 border-b-4 border-sky-500 text-sky-600 rounded-t-lg">Complete
                    the Sentence</button>
                <button onclick="changeTab(1)"
                    class="tab-btn text-lg font-semibold p-4 border-b-4 border-transparent text-gray-500 hover:text-sky-600 hover:border-sky-300 rounded-t-lg">Guess
                    the Translation</button>
                <button onclick="changeTab(2)"
                    class="tab-btn text-lg font-semibold p-4 border-b-4 border-transparent text-gray-500 hover:text-sky-600 hover:border-sky-300 rounded-t-lg">Create
                    a Dialogue</button>
            </nav>
        </div>

        <!-- Contenedor de Juegos -->
        <div id="game-container">
            <!-- Juego 1: Completa la Frase -->
            <div class="game-content">
                <h2 class="text-2xl font-bold text-sky-800 mb-4">Game 1: Complete the Conversation</h2>
                <div id="game1-question" class="mb-4 text-lg"></div>
                <div class="flex flex-col sm:flex-row gap-4 items-center">
                    <input type="text" id="game1-answer"
                        class="w-full p-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition"
                        placeholder="Type your answer here...">
                    <button onclick="checkGame1()"
                        class="w-full sm:w-auto bg-sky-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-sky-600 transition-colors duration-300 shadow-md">Check</button>
                </div>
                <div id="game1-feedback"
                    class="feedback mt-4 p-4 rounded-lg text-center font-semibold text-lg opacity-0"></div>
            </div>

            <!-- Juego 2: Adivina la Traducción -->
            <div class="game-content hidden">
                <h2 class="text-2xl font-bold text-sky-800 mb-4">Game 2: What does it mean in Spanish?</h2>
                <div id="game2-question" class="mb-6 text-xl text-center font-semibold p-4 bg-sky-50 rounded-lg"></div>
                <div id="game2-options" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <!-- Las opciones se generan con JavaScript -->
                </div>
                <div id="game2-feedback"
                    class="feedback mt-4 p-4 rounded-lg text-center font-semibold text-lg opacity-0"></div>
                <div class="text-center mt-6">
                    <button onclick="nextGame2Question()"
                        class="bg-sky-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-600 transition-colors duration-300 shadow-md">Next</button>
                </div>
            </div>

            <!-- Juego 3: Crea un Diálogo -->
            <div class="game-content hidden">
                <h2 class="text-2xl font-bold text-sky-800 mb-4">Game 3: Order the Dialogue</h2>
                <p class="text-gray-600 mb-4">Choose the correct response to make the conversation make sense.</p>
                <div class="space-y-6">
                    <div id="dialogue-container">
                        <!-- El diálogo se genera con JavaScript -->
                    </div>
                </div>
                <div id="game3-feedback"
                    class="feedback mt-4 p-4 rounded-lg text-center font-semibold text-lg opacity-0"></div>
            </div>
        </div>
    </main>

    <script>
        // --- Datos para los juegos ---
        const game1Data = [
            { question: "A: ¡Hola! Mi nombre es Alex. <br> B: ¡Hola, Alex! Yo ____ Fatma.", answer: "soy" },
            { question: "A: ¿De dónde _____? <br> B: Soy de Egipto.", answer: "eres" },
            { question: "A: ¿Cuántos años _______? <br> B: Tengo diecinueve años.", answer: "tienes" },
            { question: "Para pedir algo educadamente, dices: 'Un café, por _______'.", answer: "favor" },
            { question: "Si no sabes algo, dices: 'No ___'.", answer: "sé" },
            { question: "Cuando quieres ir a un lugar, dices: '¡______!'", answer: "Vamos" },
            { question: "Si estás cansada y quieres descansar, dices: 'Quiero _______ más'.", answer: "dormir" },
        ];

        const game2Data = [
            { question: "How do you say 'Where are you from?'", options: ["¿Cómo te llamas?", "¿Cuántos años tienes?", "¿De dónde eres?", "¿Qué te gusta?"], answer: "¿De dónde eres?" },
            { question: "How do you say 'My name is Fatma'?", options: ["Soy de Egipto", "Tengo 19 años", "Me llamo Fatma", "Hablo español"], answer: "Me llamo Fatma" },
            { question: "How do you say 'I don't know'?", options: ["No puedo", "No sé", "No entiendo", "No quiero"], answer: "No sé" },
            { question: "How do you say 'Let's go!'?", options: ["¡Vamos!", "¡Ganamos!", "¡Ayuda!", "¡Silencio!"], answer: "¡Vamos!" },
            { question: "How do you say 'I'm tired'?", options: ["Estoy feliz", "Estoy en casa", "Estoy cansada", "Tengo hambre"], answer: "Estoy cansada" },
            { question: "How do you say 'Water'?", options: ["Juego", "Ojos", "Agua", "Verano"], answer: "Agua" },
        ];

        const game3Data = [
            { person: "A", line: "¡Hola! ¿Cómo te llamas?" },
            { person: "B", options: ["Tengo 19 años.", "Me llamo Fatma. ¿Y tú?", "Soy de Egipto."], correct: "Me llamo Fatma. ¿Y tú?" },
            { person: "A", line: "Yo soy Carlos. ¡Mucho gusto!" },
            { person: "B", options: ["Adiós.", "No sé.", "Igualmente. ¿De dónde eres, Carlos?"], correct: "Igualmente. ¿De dónde eres, Carlos?" },
            { person: "A", line: "Soy de México. ¿Quieres un café?" },
            { person: "B", options: ["Sí, por favor.", "No puedo.", "Estoy cansada."], correct: "Sí, por favor." },
        ];


        let currentG1Index = 0;
        let currentG2Index = 0;
        let currentG3Index = 0;

        // --- Lógica para cambiar de pestaña ---
        const tabs = document.querySelectorAll('.tab-btn');
        const gameContents = document.querySelectorAll('.game-content');

        function changeTab(index) {
            tabs.forEach((tab, i) => {
                if (i === index) {
                    tab.classList.add('border-sky-500', 'text-sky-600');
                    tab.classList.remove('border-transparent', 'text-gray-500');
                } else {
                    tab.classList.remove('border-sky-500', 'text-sky-600');
                    tab.classList.add('border-transparent', 'text-gray-500');
                }
            });
            gameContents.forEach((content, i) => {
                if (i === index) {
                    content.classList.remove('hidden');
                } else {
                    content.classList.add('hidden');
                }
            });
        }

        // --- Lógica del Juego 1 ---
        const g1QuestionEl = document.getElementById('game1-question');
        const g1AnswerEl = document.getElementById('game1-answer');
        const g1FeedbackEl = document.getElementById('game1-feedback');

        function loadGame1() {
            g1QuestionEl.innerHTML = game1Data[currentG1Index].question;
            g1AnswerEl.value = '';
            g1FeedbackEl.classList.add('opacity-0');
        }

        function checkGame1() {
            const userAnswer = g1AnswerEl.value.trim().toLowerCase();
            const correctAnswer = game1Data[currentG1Index].answer.toLowerCase();

            g1FeedbackEl.classList.remove('opacity-0', 'bg-green-100', 'text-green-700', 'bg-red-100', 'text-red-700');

            if (userAnswer === correctAnswer) {
                g1FeedbackEl.textContent = 'Correct! Very good!';
                g1FeedbackEl.classList.add('bg-green-100', 'text-green-700');
                setTimeout(() => {
                    currentG1Index = (currentG1Index + 1) % game1Data.length;
                    loadGame1();
                }, 1500);
            } else {
                g1FeedbackEl.textContent = `Almost. The correct answer is "${correctAnswer}". Try again!`;
                g1FeedbackEl.classList.add('bg-red-100', 'text-red-700');
            }
        }

        g1AnswerEl.addEventListener('keyup', function (event) {
            if (event.key === "Enter") {
                checkGame1();
            }
        });


        // --- Lógica del Juego 2 ---
        const g2QuestionEl = document.getElementById('game2-question');
        const g2OptionsEl = document.getElementById('game2-options');
        const g2FeedbackEl = document.getElementById('game2-feedback');

        function loadGame2() {
            g2FeedbackEl.classList.add('opacity-0');
            const currentQuestion = game2Data[currentG2Index];
            g2QuestionEl.textContent = currentQuestion.question;
            g2OptionsEl.innerHTML = '';

            // Mezclar opciones para que no siempre estén en el mismo orden
            const shuffledOptions = [...currentQuestion.options].sort(() => Math.random() - 0.5);

            shuffledOptions.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.className = "w-full text-left p-4 bg-white border-2 border-gray-300 rounded-lg hover:bg-sky-100 hover:border-sky-400 transition-all duration-200";
                button.onclick = () => checkGame2(option);
                g2OptionsEl.appendChild(button);
            });
        }

        function checkGame2(selectedOption) {
            const correctAnswer = game2Data[currentG2Index].answer;
            g2FeedbackEl.classList.remove('opacity-0', 'bg-green-100', 'text-green-700', 'bg-red-100', 'text-red-700');

            if (selectedOption === correctAnswer) {
                g2FeedbackEl.textContent = 'Excellent! Correct answer.';
                g2FeedbackEl.classList.add('bg-green-100', 'text-green-700');
            } else {
                g2FeedbackEl.textContent = `That's not right. The answer was "${correctAnswer}".`;
                g2FeedbackEl.classList.add('bg-red-100', 'text-red-700');
            }

            // Deshabilitar botones después de la selección
            Array.from(g2OptionsEl.children).forEach(btn => {
                btn.disabled = true;
                if (btn.textContent === correctAnswer) {
                    btn.classList.add('bg-green-200', 'border-green-500');
                }
            });
        }

        function nextGame2Question() {
            currentG2Index = (currentG2Index + 1) % game2Data.length;
            loadGame2();
        }


        // --- Lógica del Juego 3 ---
        const dialogueContainer = document.getElementById('dialogue-container');
        const g3FeedbackEl = document.getElementById('game3-feedback');

        function loadGame3() {
            dialogueContainer.innerHTML = '';
            g3FeedbackEl.classList.add('opacity-0');
            currentG3Index = 0;
            renderDialogueTurn();
        }

        function renderDialogueTurn() {
            if (currentG3Index >= game3Data.length) {
                g3FeedbackEl.textContent = 'Congratulations! You completed the dialogue.';
                g3FeedbackEl.classList.remove('opacity-0');
                g3FeedbackEl.className = 'feedback mt-4 p-4 rounded-lg text-center font-semibold text-lg bg-green-100 text-green-700';

                const restartBtn = document.createElement('button');
                restartBtn.textContent = 'Play again';
                restartBtn.className = "mt-4 bg-sky-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-sky-600";
                restartBtn.onclick = loadGame3;
                dialogueContainer.appendChild(restartBtn);

                return;
            }

            const turn = game3Data[currentG3Index];
            const turnDiv = document.createElement('div');
            turnDiv.className = "mb-4";

            if (turn.line) { // Turno fijo
                turnDiv.innerHTML = `<div class="p-3 bg-gray-200 rounded-lg max-w-max"><strong>${turn.person}:</strong> ${turn.line}</div>`;
                dialogueContainer.appendChild(turnDiv);
                currentG3Index++;
                renderDialogueTurn(); // Pasa al siguiente turno automáticamente
            } else { // Turno con opciones
                const promptDiv = document.createElement('div');
                promptDiv.innerHTML = `<div class="p-3 rounded-lg max-w-max ml-auto bg-sky-500 text-white"><strong>${turn.person}:</strong> (Choose your response)</div>`;
                dialogueContainer.appendChild(promptDiv);

                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'flex flex-col items-end space-y-2 mt-2';

                const shuffledOptions = [...turn.options].sort(() => Math.random() - 0.5);

                shuffledOptions.forEach(option => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.className = "p-3 bg-white border-2 border-sky-400 text-sky-700 rounded-lg hover:bg-sky-100 transition-colors";
                    button.onclick = () => checkGame3(option, turn.correct, optionsDiv);
                    optionsDiv.appendChild(button);
                });
                dialogueContainer.appendChild(optionsDiv);
            }
        }

        function checkGame3(selected, correct, optionsDiv) {
            if (selected === correct) {
                dialogueContainer.removeChild(optionsDiv);
                const correctDiv = document.createElement('div');
                correctDiv.innerHTML = `<div class="p-3 rounded-lg max-w-max ml-auto bg-sky-500 text-white animate-pulse"><strong>B:</strong> ${correct}</div>`;
                dialogueContainer.appendChild(correctDiv);

                setTimeout(() => {
                    correctDiv.querySelector('.animate-pulse').classList.remove('animate-pulse');
                    currentG3Index++;
                    renderDialogueTurn();
                }, 1000);

            } else {
                g3FeedbackEl.textContent = 'That doesn\'t seem like the right answer. Try again.';
                g3FeedbackEl.className = 'feedback mt-4 p-4 rounded-lg text-center font-semibold text-lg bg-red-100 text-red-700';
                g3FeedbackEl.classList.remove('opacity-0');
                setTimeout(() => g3FeedbackEl.classList.add('opacity-0'), 2000);
            }
        }


        // --- Carga inicial de los juegos al abrir la página ---
        window.onload = () => {
            loadGame1();
            loadGame2();
            loadGame3();
        };

    </script>
</body>

</html>